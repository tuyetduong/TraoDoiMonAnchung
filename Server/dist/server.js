!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(32)),n(r(33)),n(r(34)),n(r(35)),n(r(36))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(17)),n(r(20)),n(r(21))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(44))},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(28));var n=r(37);t.default=n.default},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(43)),n(r(46)),n(r(47))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),u=r(16);t.configFile={filePath:i.resolve("config","config.json"),privateKey:i.resolve("config","key","privateKey"),publicKey:i.resolve("config","key","publicKey")};var s=function(){function e(){this.PORT=3e3,this.URL="",this.DB={name:"",uri:""},this.TokenConfig={algorithm:"",expiresIn:"",resetTokenExpiresIn:"",publicKey:"",privateKey:"",secretKey:""},this.MailConfig={apiKey:"",fromName:"",fromEmail:""}}return e.bootstap=function(){return n(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:return r=new e,[4,u.readConfig(t.configFile)];case 1:return n=o.sent(),r.PORT=n.PORT,r.URL=n.URL,r.DB=n.DB,r.TokenConfig=n.TokenConfig,r.MailConfig=n.MailConfig,[2,r]}})})},e}();t.default=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),u=function(){function e(e){this.uri=e.uri,this.DB=e.name}return e.prototype.connect=function(){return n(this,void 0,void 0,function(){var e,t,r;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this.uri+"/"+this.DB,[4,i.connect(e)];case 1:return t=n.sent(),[2,t];case 2:throw r=n.sent();case 3:return[2]}})})},e}();t.default=u},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(38)),n(r(39));var o=r(41);t.default=o.default},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),u=function(){function e(e){this.userService=e.services.userService}return e.prototype.search=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n={queries:{email:e.query.email,gender:e.query.gender,phone:e.query.phone,username:e.query.username},sort:e.query.sort,page:e.query.page||1,amount:e.query.amount||5},n=JSON.parse(JSON.stringify(n)),[4,this.userService.search(n)];case 1:return u=o.sent(),t.json(u),[3,3];case 2:return s=o.sent(),r(new i.CError(s)),[3,3];case 3:return[2]}})})},e.prototype.getAllUsers=function(e,t,r){return n(this,void 0,void 0,function(){var e,n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.userService.getAllUsers()];case 1:return e=o.sent(),t.json({users:e}),[3,3];case 2:return n=o.sent(),r(new i.CError(n)),[3,3];case 3:return[2]}})})},e.prototype.create=function(e,t,r){return n(this,void 0,void 0,function(){var n,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.userService.createOne(e.body)];case 1:return n=o.sent(),t.json(n),[3,3];case 2:return u=o.sent(),r(new i.CError(u)),[3,3];case 3:return[2]}})})},e.prototype.update=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=e.body.user,[4,this.userService.updateById(n.id,e.body)];case 1:return u=o.sent(),t.json(u),[3,3];case 2:return s=o.sent(),r(new i.CError(s)),[3,3];case 3:return[2]}})})},e.prototype.updateById=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=e.params.id,[4,this.userService.updateById(n,e.body)];case 1:return u=o.sent(),t.json(u),[3,3];case 2:return s=o.sent(),r(new i.CError(s)),[3,3];case 3:return[2]}})})},e.prototype.delete=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=e.params.id,[4,this.userService.deleteById(n)];case 1:return u=o.sent(),t.json(u),[3,3];case 2:return s=o.sent(),r(new i.CError(s)),[3,3];case 3:return[2]}})})},e.prototype.informationbytoken=function(e,t,r){return n(this,void 0,void 0,function(){return o(this,function(n){try{t.json(e.body.user)}catch(e){r(new i.CError(e.error||e,e.status))}return[2]})})},e}();t.UserController=u},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),u=function(){function e(e){this.authService=e.services.authService}return e.prototype.register=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n={TenDangNhap:e.body.TenDangNhap,Password:e.body.Password,Email:e.body.Email},[4,this.authService.register(n)];case 1:return u=o.sent(),t.json(u),[3,3];case 2:return s=o.sent(),r(new i.CError(s)),[3,3];case 3:return[2]}})})},e.prototype.login=function(e,t,r){return n(this,void 0,void 0,function(){var n,u,s,a,c;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=e.body,u=n.TenDangNhap,s=n.Password,[4,this.authService.login(u,s)];case 1:return a=o.sent(),t.json(a),[3,3];case 2:return c=o.sent(),r(new i.CError(c.error.error||c.error,c.status)),[3,3];case 3:return[2]}})})},e}();t.AuthController=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(54))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this;Object.defineProperty(t,"__esModule",{value:!0});var u=r(15),s=r(24),a=r(27),c=r(5),l=r(10),f=r(42),p=r(6),h=r(48),d=r(53);(function(){return n(i,void 0,void 0,function(){var e,t,r,n,i,y,v;return o(this,function(o){switch(o.label){case 0:return[4,u.default.bootstap()];case 1:return e=o.sent(),t=new d.Contrib(e),r=new s.default(e),n=new a.default(e.DB),n.connect(),i=new c.default,y=new l.default({repositories:i,contrib:t,config:e}),v={services:y,contrib:t},r.addMiddleWare(f()),r.addMiddleWare(p.headerMiddleware),r.addRoutes("/api/auth",h.AuthRoutes(v)),r.addRoutes("/api/users",h.UserRoutes(v)),r.addMiddleWare(p.ErrorRequestHandler(t.logger)),[2,{app:r,logger:t.logger}]}})})})().then(function(e){var t=e.app,r=e.logger;t.listen(),r.info("Server is listening on port "+t.options.port)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.default=n.default,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(7))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this;Object.defineProperty(t,"__esModule",{value:!0});var u=r(1);t.readConfig=function(e){return n(i,void 0,void 0,function(){var t,r,n,i,s;return o(this,function(o){switch(o.label){case 0:return[4,u.readFile(e.filePath)];case 1:return t=o.sent(),(r=JSON.parse(t),n=r.TokenConfig.secretKey||"default",r.TokenConfig.algorithm.includes("HS"))?(r.TokenConfig.privateKey=n,r.TokenConfig.publicKey=n,[3,5]):[3,2];case 2:return i=r.TokenConfig,[4,u.readFile(e.privateKey)];case 3:return i.privateKey=o.sent()||n,s=r.TokenConfig,[4,u.readFile(e.privateKey)];case 4:s.publicKey=o.sent()||n,o.label=5;case 5:return[2,r]}})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(18))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);t.readFile=function(e){return new Promise(function(t,r){n.readFile(e,"utf8",function(e,n){return e?r(e):t(n)})})}},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=function(e,t){return Promise.resolve().then(function(){for(var r=0,n=Object.keys(t);r<n.length;++r){var o=n[r];e.hasOwnProperty(o)&&(t[o]=e[o])}return e.hasOwnProperty("_id")&&(t.id="string"==typeof e._id?e._id:e._id.toString()),t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(22))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23),o={saltRounds:10};t.genSalt=function(){return n.genSalt(o.saltRounds)},t.hashWithSalt=function(e,t){return n.hash(e,t)},t.compare=function(e,t){return n.compare(e,t)}},function(e,t){e.exports=require("bcrypt")},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=r(25),i=r(26),u=r(3),s=function(){function t(t){this.config(t),this.app=n(),this.app.use("/static",n.static(u.join(e,"public"))),this.defaultMiddleware()}return t.prototype.listen=function(e){this.app.listen(this.options.port,e)},t.prototype.addRoutes=function(e,t){this.app.use(e,t)},t.prototype.addMiddleWare=function(e){this.app.use(e)},t.prototype.defaultMiddleware=function(){this.app.use(o.json()),this.app.use(o.urlencoded({extended:!1})),this.app.use(i("dev"))},t.prototype.config=function(e){this.options={port:e.PORT||19696}},t}();t.default=s}).call(t,"/")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("morgan")},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8);t.default=o.default,n(r(5)),n(r(8))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(29),i=r(30),u=function(e){function t(){return e.call(this,i.UserModel)||this}return n(t,e),t}(o.RepositoryBase);t.UserRepository=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.model=e}return e.prototype.create=function(e){return this.model.create(e)},e.prototype.count=function(e){return this.model.count(e).then(function(e){return e})},e.prototype.findById=function(e){return this.model.findById(e).then(function(e){return e})},e.prototype.find=function(e,t){return this.model.find(e,null,t).exec().then(function(e){return e})},e.prototype.findOne=function(e){return this.model.findOne(e).then(function(e){return e})},e.prototype.updateById=function(e,t){return this.model.findByIdAndUpdate(e,t).then(function(e){return!0}).catch(function(e){return!1})},e.prototype.deleteById=function(e){return this.model.findByIdAndRemove(e).then(function(e){return!0}).catch(function(e){return!1})},e}();t.RepositoryBase=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(31))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(0),i=new n.Schema({TenDangNhap:{type:String,required:!0},Password:String,Email:{type:String,required:!0},IDThucDon:{type:String,default:""},SDT:{type:String,default:""},salt:{type:String,default:""},gender:{type:String,default:""},avatar:{type:String,default:""},role:{type:String,default:o.Roles.User},birthday:{type:Date,default:Date.now()},activated:{type:Boolean,default:!1}},{toObject:{virtuals:!0},toJSON:{virtuals:!0}});t.UserModel=n.model(o.CollectionNames.User,i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionNames={User:"user",Role:"role",ThongTinSuatAn:"thongtinsuatan",ThucDon:"thucdon"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Admin="Administrator",e.User="User"}(t.Roles||(t.Roles={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Error={USER_EXIST:"User is existed",WRONG_INFO:"Wrong information",MAIL_ERROR:"Failed to send mail",USER_UNACTIVATED:"User is not activated",NOT_FOUND:"Not found",SYSTEM_ERROR:"System error",JWT_TOKEN_INVALID:"Invalid Token",PERMISSION_FORBIDDEN:"Permission Denied",ID_ERROR:"Id was wrong",STORE_EXIST:"Store is existed",TRADEMARK_EXIST:" trademark is existed",ERROR_SERVER:"error server"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email={CONFIRM_EMAIL_TITLE:"Activate your account",FORGOT_PASSWORD_TITLE:"Reset your password"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Condition={conditionDistance:50}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=function(){function e(){this.userRepository=new n.UserRepository}return e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),u=r(1),s=function(){function e(e){this.userRepo=e.userRepository}return e.prototype.findOne=function(e){return n(this,void 0,void 0,function(){var t,r;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userRepo.findOne(e)];case 1:if(!(t=n.sent()))throw i.Error.NOT_FOUND;return[2,t];case 2:throw r=n.sent();case 3:return[2]}})})},e.prototype.search=function(e){return n(this,void 0,void 0,function(){var t,r,n,i,u,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.userRepo.count(e.queries)];case 1:return t=o.sent(),r={skip:e.page>1?(e.page-1)*t:0,limit:e.amount,sort:{username:e.sort||-1}},[4,this.userRepo.find(e.queries,r)];case 2:return n=o.sent(),i=[],n.forEach(function(e){var t=e.toJSON();delete t.salt,delete t.Password,i.push(t)}),u={users:i,totalPage:Math.floor(t/e.amount+1),totalUser:t,currentPages:e.page},[2,u];case 3:throw s=o.sent();case 4:return[2]}})})},e.prototype.findById=function(e){return n(this,void 0,void 0,function(){var t,r;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userRepo.findById(e)];case 1:if(!(t=n.sent()))throw i.Error.NOT_FOUND;return[2,t];case 2:throw r=n.sent();case 3:return[2]}})})},e.prototype.getAllUsers=function(){return this.userRepo.find({})},e.prototype.createOne=function(e){return n(this,void 0,void 0,function(){var t,r,n,s,a,c,l;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,this.userRepo.findOne({email:e.Email})];case 1:return t=o.sent(),[4,this.userRepo.findOne({username:e.TenDangNhap})];case 2:if(r=o.sent(),t||r)throw i.Error.USER_EXIST;return[4,u.genSalt()];case 3:return n=o.sent(),[4,u.hashWithSalt(e.Password||"",n)];case 4:return s=o.sent(),e.salt=n,e.Password=s,e.activated=!0,[4,this.userRepo.create(e)];case 5:return a=o.sent(),c=a.toJSON(),delete c.Password,delete c.salt,[2,c];case 6:throw l=o.sent();case 7:return[2]}})})},e.prototype.updateById=function(e,t){return n(this,void 0,void 0,function(){var r,n,s,a;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,this.userRepo.findById(e)];case 1:if(!(r=o.sent()))throw i.Error.NOT_FOUND;return t.Password?[4,u.genSalt()]:[3,4];case 2:return n=o.sent(),[4,u.hashWithSalt(t.Password,n)];case 3:s=o.sent(),t.salt=n,t.Password=s,o.label=4;case 4:return[2,this.userRepo.updateById(e,t)];case 5:throw a=o.sent();case 6:return[2]}})})},e.prototype.deleteById=function(e){return n(this,void 0,void 0,function(){var t,r;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userRepo.findById(e)];case 1:if(!(t=n.sent()))throw i.Error.NOT_FOUND;return[2,this.userRepo.deleteById(e)];case 2:throw r=n.sent();case 3:return[2]}})})},e}();t.UserService=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),u=r(1),s=r(40),a=function(){function e(e,t,r){this.token=t.token,this.mailer=t.mail,this.tokenConfig=r,this.userRepo=e.userRepository}return e.prototype.login=function(e,t){return n(this,void 0,void 0,function(){var r,n,a,c,l;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,this.userRepo.findOne({TenDangNhap:e})];case 1:return r=o.sent(),r?[4,u.compare(t,r.Password)]:[3,4];case 2:return(n=o.sent())?(a=this.toResponseObj(r.toJSON()),[4,this.token.generate(a)]):[3,4];case 3:return c=o.sent(),[2,{token:c}];case 4:throw{error:i.Error.WRONG_INFO,status:s.statusCode.BadRequest};case 5:throw l=o.sent();case 6:return[2]}})})},e.prototype.register=function(e){return n(this,void 0,void 0,function(){var t,r,n,s,a,c,l,f;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,7,,8]),[4,this.userRepo.findOne({Email:e.Email})];case 1:return t=o.sent(),[4,this.userRepo.findOne({TenDangNhap:e.TenDangNhap})];case 2:if(r=o.sent(),t||r)throw i.Error.USER_EXIST;return[4,u.genSalt()];case 3:return n=o.sent(),[4,u.hashWithSalt(e.Password||"",n)];case 4:return s=o.sent(),e.salt=n,e.Password=s,[4,this.userRepo.create(e)];case 5:return a=o.sent(),c=this.toResponseObj(a.toJSON()),[4,this.token.generate(c)];case 6:return l=o.sent(),[2,c];case 7:throw f=o.sent();case 8:return[2]}})})},e.prototype.toResponseObj=function(e){return delete e.password,delete e.salt,e},e}();t.AuthService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusCode={BadRequest:400,Unauthorized:401,NotFound:404,ErrorServer:500}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=function(){function e(e){this.userService=new n.UserService(e.repositories),this.authService=new n.AuthService(e.repositories,e.contrib,e.config.TokenConfig)}return e}();t.default=o},function(e,t){e.exports=require("express-fileupload")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.ErrorRequestHandler=function(e){return function(t,r,o,i){t instanceof n.CError?o.status(t.status).json(t.toResponseJSON()):o.status(t.status).json({success:!1,message:t.message}),e.error(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(45))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r){var n=e.call(this,t)||this;return Error.captureStackTrace(n,n.constructor),n.name=n.constructor.name,n.status=r||500,n}return n(t,e),t.prototype.toResponseJSON=function(){return{success:!1,message:this.message}},t}(Error);t.CError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerMiddleware=function(e,t,r){t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t.setHeader("Access-Control-Allow-Headers","X-Requested-With, Content-Type, Authorization, x-access-token"),t.setHeader("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?t.sendStatus(200):r()}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this;Object.defineProperty(t,"__esModule",{value:!0});var u=r(2),s=r(0);t.authMiddleware=function(e){return function(t,r,a){return n(i,void 0,void 0,function(){var n,i,c,l;return o(this,function(o){switch(o.label){case 0:n=t.headers["x-access-token"],o.label=1;case 1:return o.trys.push([1,4,,5]),[4,e.token.decode(n)];case 2:if(!(i=o.sent()))throw new u.CError(s.Error.JWT_TOKEN_INVALID,401);return[4,e.userService.findById(i._id)];case 3:if(!(c=o.sent()))throw new u.CError(s.Error.NOT_FOUND,404);return t.body.user=c,a(),[3,5];case 4:return l=o.sent(),l instanceof u.CError?r.status(l.status).json(l.toResponseJSON()):r.status(401).json({success:!1,message:l.message}),[3,5];case 5:return[2]}})})}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(6)),n(r(49)),n(r(51))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(11)),n(r(50))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=r(11),i=r(6),u=r(0);t.UserRoutes=function(e){var t=n.Router(),r=new o.UserController(e),s=i.authMiddleware({role:u.Roles.User,token:e.contrib.token,userService:e.services.userService});return t.get("/",r.getAllUsers.bind(r)),t.get("/search",r.search.bind(r)),t.put("/",r.update.bind(r)),t.get("/informationbytoken",s,r.informationbytoken.bind(r)),t}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(12)),n(r(52))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=r(12);t.AuthRoutes=function(e){var t=n.Router(),r=new o.AuthController(e);return t.post("/login",r.login.bind(r)),t.post("/register",r.register.bind(r)),t}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(13)),n(r(56))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55),o=function(){function e(){this.config=this.defaultConfig(),this.logger=n.createLogger({name:"server",streams:[{level:this.config.defaultConfig||"trace",stream:process.stdout}],serializers:n.stdSerializers})}return e.prototype.error=function(e){this.logger.error(e)},e.prototype.info=function(e){this.logger.info(e)},e.prototype.defaultConfig=function(){return{consoleLevel:"trace"}},e}();t.Logger=o},function(e,t){e.exports=require("bunyan")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),o=r(57),i=r(60),u=function(){function e(e){this.logger=new n.Logger,this.token=new o.Token(e.TokenConfig),this.mail=new i.Mail(e,this.logger)}return e}();t.Contrib=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(58))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(59),o=function(){function e(e){this.algorithm=e.algorithm,this.privateKey=e.privateKey,this.publicKey=e.publicKey,this.options={expiresIn:e.expiresIn}}return e.prototype.generate=function(e,t){var r=this;return new Promise(function(o,i){var u=Object.assign({},r.options,t);n.sign(e,r.privateKey,u,function(e,t){return e?i(e):o(t)})})},e.prototype.verify=function(e){var t=this;return new Promise(function(r){n.verify(e,t.publicKey,{algorithms:[t.algorithm]},function(e){return r(e?!1:!0)})})},e.prototype.decode=function(e){var t=this;return new Promise(function(r,o){n.verify(e,t.publicKey,{algorithms:[t.algorithm]},function(e,t){return e?o(e):r(t)})})},e}();t.Token=o},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(61))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=r(62),u=r(0),s=r(63),a=function(){function e(e,t){this.mailService=i,this.mailConfig=e.MailConfig,this.url=e.URL,this.logger=t,this.mailService.setApiKey(this.mailConfig.apiKey)}return e.prototype.sendActivateUser=function(e,t){var r=s.activateUserHTMLTemplate(e,t,this.url),n={to:[e.email],subject:u.Email.CONFIRM_EMAIL_TITLE,html:r};return this.send(n)},e.prototype.sendForgotPassword=function(e,t){return n(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:return[4,s.forgotPasswordHTMLTemplate(t,this.url)];case 1:return r=o.sent(),n={to:[e.email],subject:u.Email.FORGOT_PASSWORD_TITLE,html:r},[2,this.send(n)]}})})},e.prototype.send=function(e){var t=this,r={to:e.to,from:{name:this.mailConfig.fromName,email:this.mailConfig.fromEmail},subject:e.subject,text:e.text,html:e.html};return this.mailService.send(r).then(function(){return!0}).catch(function(e){throw t.logger.error(e),e})},e}();t.Mail=a},function(e,t){e.exports=require("@sendgrid/mail")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(64))},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,s)}a((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){a.label=r[1];break}if(6===r[0]&&a.label<u[1]){a.label=u[1],u=r;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(r);break}u[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,s,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this;Object.defineProperty(t,"__esModule",{value:!0});var u=r(3),s=r(1);t.activateUserHTMLTemplate=function(e,t,r){return"<p>Hello "+e.username+'</p><p>Please click the link below to active your account</p><a target="_blank" href="'+r+"/auth/activate/"+t+'">Click here to active your account</a>'},t.forgotPasswordHTMLTemplate=function(t,r){return n(i,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:return[4,s.readFile(u.resolve(e,"./forgot-template.html"))];case 1:return n=o.sent(),n=n.replace("$url",r+"/auth/forget-password/"+t),[2,n]}})})}}).call(t,"/")}]);